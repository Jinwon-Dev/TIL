## 1. 파일 시스템 구조

→ ***파일 시스템을 유지하기 위한 보조저장장치로 디스크가 대부분 사용된다.***

</br>

> **디스크가 보조저장장치로 사용되는 2가지 이유**
> 
1. 디스크는 추가 장소를 사용하지 않고 재기록이 가능하다.
    - 디스크로부터 한 블록을 읽고, 변경하여 같은 블록에 재기록이 가능하다.

</br>

2. 디스크에 있는 임의의 블록의 정보를 직접 접근할 수 있다.
    - 따라서, 임의의 파일을 순차적 또는 무작위 방법으로 쉽게 접근할 수 있다.

</br>

> **I/O 효율성을 향상하기 위해 메모리와 대용량 스토리지 간의 I/O 전송이 블록 단위로 수행된다.**
> 
- 하드 디스크 드라이브의 각 블록에는 하나 이상의 섹터가 있다.

</br>

> **파일 시스템은 쉽게 데이터를 저장하고, 찾고 또한 인출할 수 있게 함으로써 저장장치를 더욱 효율적이고 편리하게 사용할 수 있게 한다.**
> 
- 파일 시스템은 크게 두 가지의 설계 문제를 제기한다.
    - 파일 시스템이 사용자에게 어떻게 보여야 할지를 정의하는 것
    - 논리 파일 시스템을 물리적인 2차 저장장치로 사상하는 알고리즘과 데이터 구조를 만드는 것

</br>

> **파일 시스템은 여러 층으로 이루어져 있다.**
> 
<img width="147" alt="image" src="https://user-images.githubusercontent.com/106216912/227697066-32c4ccd6-656c-49c5-bb3a-84fcb24da5dd.png">

- **입/출력 제어 층**
    - 장치 드라이버 루틴들과 인터럽트 핸들러로 이루어져 있어서 메모리와 디스크 시스템 간의 정보 전송을 담당한다.

</br>

- **기본 파일 시스템 층**
    - 적절한 장치 드라이버에게 저장장치상의 블록을 읽고 쓰도록 일반적인 명령을 내린다.
    - 논리 블록 주소를 기반으로 드라이브에 명령일 내리고, I/O 요청 스케줄링도 고려한다.
    - 또한, 다양한 파일 시스템과 디렉터리 및 데이터 블록을 저장하는 메모리 버퍼와 캐시를 관리한다.

</br>

- **파일-구성 모듈**
    - 파일과 상응하는 논리 블록을 알고 있다.
    - 어느 디스크 공간이 비어 있는지를 파악하는 가용 공간 관리자를 포함한다.

</br>

- **논리 파일 시스템 층**
    - 메타데이터 정보를 관리한다.
    - 파일 구조는 파일 제어 블록을 통해 유지된다.
    - **파일 제어 블록(FCB)** 는 소유, 허가 그리고 파일 내용의 위치를 포함하여 파일에 관한 정보를 가지고 있다.

</br>

> **파일 시스템 구현을 위해 계층 구조를 사용함으로써, 코드의 중복이 최소화되었다.**
> 
- 다수의 파일 시스템에 의해 I/O 제어와 때로는 기본 파일 시스템 코드가 사용될 수 있다.
    - 그 경우, 각 파일 시스템은 자신의 논리 파일 시스템과 파일 구조 모듈을 가지고 있다.
    - 하지만 계층화는 **더 많은 운영체제 오버헤드를 야기하여 성능을 저하**한다.

---